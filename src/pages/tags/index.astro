---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { collectTags, getPublishedPosts } from '../../utils/posts';

const posts = await getPublishedPosts();
const tags = collectTags(posts);
const BASE = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : `${import.meta.env.BASE_URL}/`;
---
<Layout title="Tags | Yuanle Liuâ€˜s Blog">
  <Header />
  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <h1 class="text-3xl font-bold mb-6">Tags</h1>
    <div class="grid sm:grid-cols-2 gap-4">
      {tags.map((tag) => (
        <a
          href={`${BASE}tags/${encodeURIComponent(tag.tag)}/`}
          class="p-4 rounded-lg border border-gray-200 dark:border-gray-800 hover:border-blue-500 flex items-center justify-between"
        >
          <span>#{tag.tag}</span>
          <span class="text-sm text-gray-500">{tag.count}</span>
        </a>
      ))}
    </div>
  </main>
  <Footer />
</Layout>
