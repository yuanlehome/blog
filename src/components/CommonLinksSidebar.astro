---
/**
 * CommonLinksSidebar Component
 *
 * Displays a list of common/useful links in a sidebar.
 * Reuses the same styling and layout system as TableOfContents.
 * Position is controlled via layout.yml configuration (left/right/off).
 */
import { getLayoutConfig } from '../config/loaders';

const layoutConfig = getLayoutConfig();
const { enabled, title, links } = layoutConfig.commonLinks;

// Don't render if disabled or no links
if (!enabled || links.length === 0) {
  return null;
}
---

<div class="w-full" data-common-links-shell>
  <aside class="hidden lg:block">
    <nav
      class="flex w-full flex-col gap-3 overflow-hidden rounded-xl border border-zinc-200 bg-neutral-50/80 p-4 shadow-md backdrop-blur-sm dark:border-zinc-800 dark:bg-zinc-900/50"
      aria-label={title}
      data-common-links-container
    >
      <div class="space-y-1">
        <p class="text-sm font-semibold text-zinc-900 dark:text-zinc-100">{title}</p>
        <p class="text-xs text-zinc-500 dark:text-zinc-400">快速访问常用工具和资源</p>
      </div>
      <ul class="pr-1 space-y-2" data-common-links-scroll>
        {
          links.map((link) => (
            <li>
              <a
                href={link.href}
                target={link.newTab ? '_blank' : undefined}
                rel={link.newTab ? 'noopener noreferrer' : undefined}
                class="group block rounded-lg border border-zinc-200/60 bg-white/50 px-3 py-2.5 text-sm transition-all hover:border-sky-300 hover:bg-sky-50/50 hover:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500 focus-visible:ring-offset-1 dark:border-zinc-700/60 dark:bg-zinc-900/30 dark:hover:border-sky-600 dark:hover:bg-sky-950/30 dark:focus-visible:ring-sky-400"
              >
                <div class="flex flex-col gap-1">
                  <span class="font-medium text-zinc-900 group-hover:text-sky-700 dark:text-zinc-100 dark:group-hover:text-sky-300">
                    {link.label}
                    {link.newTab && (
                      <span class="ml-1 inline-block text-xs opacity-60" aria-hidden="true">
                        ↗
                      </span>
                    )}
                  </span>
                  {link.description && (
                    <span class="text-xs text-zinc-500 dark:text-zinc-400">{link.description}</span>
                  )}
                </div>
              </a>
            </li>
          ))
        }
      </ul>
    </nav>
  </aside>
</div>
